From 043fb958ea9563bbbfb31285a63647181fdc1ea2 Mon Sep 17 00:00:00 2001
From: Christopher Degawa <ccom@randomderp.com>
Date: Sun, 18 Jan 2026 21:40:38 -0600
Subject: [PATCH 2/2] svt-av1: fix aq_mode

enable_adaptive_quantization -> aq_mode for v4.0.0

Signed-off-by: Christopher Degawa <ccom@randomderp.com>
---
 src/codec_svt.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/codec_svt.c b/src/codec_svt.c
index 6f366ed1..4963bf96 100644
--- a/src/codec_svt.c
+++ b/src/codec_svt.c
@@ -170,7 +170,11 @@ static avifResult svtCodecEncodeImage(avifCodec * codec,
 #else
         svt_config->logical_processors = encoder->maxThreads;
 #endif
+#if SVT_AV1_CHECK_VERSION(4, 0, 0)
+        svt_config->aq_mode = 2;
+#else
         svt_config->enable_adaptive_quantization = 2;
+#endif
         // disable 2-pass
 #if SVT_AV1_CHECK_VERSION(0, 9, 0)
         svt_config->rc_stats_buffer = (SvtAv1FixedBuf) { NULL, 0 };
-- 
2.52.0

